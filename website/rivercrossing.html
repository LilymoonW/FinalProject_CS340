<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>River Crossing Game</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='rivercrossing.css') }}">

  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

</head>
<body>

<header>
  <h1>Stage 1: Waban Crossing ~ Fox, Goose, and Lettuce</h1>
</header>

<main>
  <div class="story-container">
    <p id="storyText">
      <!-- The personalized message will go here -->
    </p>
  </div>
  
  
    


  <div id="riverbanks">
    <!-- Left Bank -->
    <div id="left-bank" class="bank" ondrop="dropOntoBank(event)" ondragover="allowDrop(event)">
      <div id="fox" class="item" draggable="true">
        <img src="/static/assets/fox.png" alt="fox">
      </div>
      <div id="goose" class="item" draggable="true">
        <img src="/static/assets/goose.png" alt="goose">
      </div>
      <div id="lettuce" class="item" draggable="true">
        <img src="/static/assets/lettuce.png" alt="lettuce">
      </div>
      <div id="student" class="item" draggable="true">
        <img src="/static/assets/farmer.png" alt="student">
      </div>
    </div>

    <!-- River and Boat -->
    <div id="river">
      <div id="boat" ondrop="dropIntoBoat(event)" ondragover="allowDrop(event)">
        <img src="/static/assets/boat.png" alt="Boat">
      </div>
    </div>

    <!-- Right Bank -->
    <div id="right-bank" class="bank" ondrop="dropOntoBank(event)" ondragover="allowDrop(event)">
      <!-- Empty at start -->
    </div>
  </div>

  <div class="button-container">
    <button type="button" onclick="moveBoat()">Move Boat!</button>
    <button type="button" onclick="resetGame()">Reset Stage</button> <!-- NEW RESET BUTTON -->
  </div>
  

  <p id="message"></p>

</main>

<script>
  window.onload = function() {
    const name = localStorage.getItem('playerName') || 'mystery student';
    const dorm = localStorage.getItem('dorm') || 'some dorm';
  
    const story = `After traveling from ${dorm} to Lake Waban, you find a handwritten note waiting. 
  <br><br>
  ‘You made it... good. Here’s what you need to do next.
  <br><br>
  You need to get across the lake with your fox, your emotional support goose, and a very important head of lettuce. 
  The boat can only carry you and one item at a time. But be careful — if you leave the fox alone with the goose, 
  or the goose alone with the lettuce, well… let’s just say things will get messy.
  <br><br>
  I’m counting on you to figure this out. Good luck… and remember, think ahead!’`;
  
    document.getElementById('storyText').innerHTML = story;
  };
  </script>
  
</body>
</html>
